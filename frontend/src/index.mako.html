# -*- coding: utf-8 -*-
<!DOCTYPE html>
<html ng-app="geoadmin" ng-controller="GaMainController"
itemscope itemtype="http://schema.org/WebApplication"
% if device == 'mobile' :
 manifest="geoadmin.${git_commit_short}.appcache"
% endif
>
  <head>
    <!--![if !HTML5]>
    <meta http-equiv="X-UA-Compatible" content="IE=9,IE=10,IE=edge,chrome=1"/>
    <![endif]-->
    <!-- INGRID: Change title --> 
    <title translate="page_title">InGrid Map Client</title>
    <meta charset="utf-8"/>
    <!-- verification for google webmaster tools -->
    <meta name="google-site-verification" content="ZAmW5d4_2X8xb5Yy_nYQbnTSe1EIeSqyhox9aXXwrws"/>
    <!-- verification for bing webmaster tools -->
    <meta name="msvalidate.01" content="58E0E0B7DD4AB3D30EE315C695950E68"/>
    <!-- verification for yandex webmaster tools -->
    <meta name='yandex-verification' content='4795f82c05657028'/>
    <!-- this tag enables the search bot forwarding to _escaped_fragment_= urls for SEO. It can be used instead of the ugly hasbang -->
    <meta name="fragment" content="!"/>
    <!-- INGRID: Add referrer -->
    <meta name="referrer" content="origin"/>

    <meta name="viewport" content="initial-scale=1.0, user-scalable=no, minimal-ui"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black"/>
    <meta name="application-name" content="map.geo.admin.ch"/>
<!-- INGRID: Change image --> 
    <meta name="msapplication-TileImage" content="${s3basepath}img/touch-icon-bund-144x144.png"/>
    <meta name="msapplication-TileColor" content="#ffffff"/>
<!-- INGRID: Change image --> 
    <meta name="msapplication-square70x70logo" content="${s3basepath}img/touch-icon-bund-70x70.png"/>
    <meta name="msapplication-square150x150logo" content="${s3basepath}img/touch-icon-bund-150x150.png"/>
    <meta name="msapplication-square310x310logo" content="${s3basepath}img/touch-icon-bund-310x310.png"/>
    <link rel="dns-prefetch" href="${api_url}"/>

<!-- INGRID: Change image --> 
    <link rel="apple-touch-icon" sizes="76x76" href="${s3basepath}img/touch-icon-bund-76x76.png"/>
    <link rel="apple-touch-icon" sizes="120x120" href="${s3basepath}img/touch-icon-bund-120x120.png"/>
    <link rel="apple-touch-icon" sizes="152x152" href="${s3basepath}img/touch-icon-bund-152x152.png"/>

    <!-- Description is translated 'by hand' in the MainController -->
    <meta name="description" translate-attr="{content: 'page_description'}" content="geo.admin.ch ist die Geoinformationsplattform der Schweizerischen Eidgenossenschaft. // geo.admin.ch est la plateforme de géoinformation de la Confédération suisse."/>
    <meta name="keywords" content="maps Switzerland, map viewer, Swiss Map,Confederation, geodata, public platform, geographical information, geoportal, orthophotos, geolocation, geoinformation, Geodaten, Geoinformation, Bund, Plattform, Karte, Kartendienst, Kartenviewer"/>
    <meta name="news_keywords" content="Maps of Switzerland"/>

    <!-- Open Graph metas SMO -->
    <meta property="og:site_name" content="geo.admin.ch"/>
    <meta property="og:title" content="Swiss Geoportal"/>
    <meta property="og:description" translate-attr="{content: 'page_description'}" content="geo.admin.ch ist die Geoinformationsplattform der Schweizerischen Eidgenossenschaft. // geo.admin.ch est la plateforme de géoinformation de la Confédération suisse."/>
    <meta property="og:type" content="WebApplication"/>
    <meta property="og:url" content="https://map.geo.admin.ch"/>
    <!-- INGRID: Change icon --> 
    <meta property="og:image" content="img/logo.png"/>

    <!-- Twitter Card Infos -->
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:site" content="@swiss_geoportal"/>
    <meta name="twitter:creator" content="@swiss_geoportal"/>
    <meta name="twitter:title" content="geo.admin.ch"/>
    <meta name="twitter:description" content="geo.admin.ch ist die Geoinformationsplattform der Schweizerischen Eidgenossenschaft. // geo.admin.ch est la plateforme de géoinformation de la Confédération suisse."/>
    <!-- INGRID: Change icon --> 
    <meta name="twitter:image" content="img/logo.png"/>
    <meta name="twitter:url" content="https://map.geo.admin.ch"/>

    <!-- Facebook Specific fb:admins and fb.appid -->

    <!-- Google+ Specific Tags -->
    <meta itemprop="name" content="geo.admin.ch"/>
    <meta itemprop="description" content="geo.admin.ch ist die Geoinformationsplattform der Schweizerischen Eidgenossenschaft. // geo.admin.ch est la plateforme de géoinformation de la Confédération suisse."/>
    <!-- INGRID: Change icon --> 
    <meta itemprop="image" content="img/logo.png"/>

    <link rel="manifest" href="manifest.json">

    <script>
      (function() {
        var w = window, l = w.location, n = w.navigator, p = '${device}', m = l.search.match(/(?:mobile=(true|false))/);
        if (!l.origin) {
          l.origin=l.protocol + "//" +l.hostname; // IE fix
        }
        m = (m) ? m[1] : m; // avoid loops
        if (!(p == 'desktop' && m == 'false') && !(p == 'mobile' && m == 'true')) {
          var href, onMobile = (('ontouchstart' in w) || n.maxTouchPoints > 1 || n.msMaxTouchPoints > 1) && (screen.width <= 768 || screen.height <= 768);
          if (m == 'false' || (!onMobile && p == 'mobile')) {
            href = l.origin + l.pathname.replace(/\/(|(mobile|embed)\.html)$/, '/index.html') + l.search;
          } else if (m == 'true' || (onMobile && p == 'desktop')) {
            href = l.origin + l.pathname.replace(/\/(|(index|embed)\.html)$/, '/mobile.html') + l.search;
          }
          if (href && href != l.href) {
            l.href = href;
          }
        }
      })();
    </script>
    <!-- INGRID: Add 'mapUserId' -->
    <script language="javascript">
        var mapUserId = undefined;
        if (window.parent.mapUserId) {
          mapUserId = window.parent.mapUserId;
        }
    </script>
    <!-- INGRID: Add '${versionslashed}' to reload sources -->
    <link href="${s3basepath}style/app.css?v=${version}" rel="stylesheet"/>
    <!-- INGRID: Add app.override.css -->
    <link href="${s3basepath}../css/app.override.css?v=${version}" rel="stylesheet"/>
    <!-- INGRID: Add app.layout.override.css -->
    <link href="${s3basepath}../css/app.layout.override.css?v=${version}" rel="stylesheet"/>
    <link href="/ingrid-webmap-client/rest/config/css?v=${version}" rel="stylesheet"/>
    <!-- INGRID: Settings -->
    <script src="/ingrid-webmap-client/rest/config/setting?v=${version}"></script>
  </head>
  <body class="{{topicId}} {{langId}}"
        ng-class="{
          'search-focused': globals.searchFocused,
          'webkit': globals.webkit,
          'no-animation': !globals.animation,
          'offline': globals.offline,
          'online': !globals.offline,
          'desktop': globals.desktop,
          'mobile': globals.mobile,
          'embed': globals.embed,
          'ga-draw-active': globals.isDrawActive,
          'ga-3d-active': globals.is3dActive,
          'ga-fps-active': globals.isFpsActive,
          'ios': globals.ios
        }">
    <!-- The below conditional is ignored by >= IE10 and all other browsers -->
    <!--[if (IE)&(lt IE 10)]>
      <script>
       (function(){
       var msgDocumentMode = "";
       var msgCompatibilityView = "";
       if (document.documentMode < 9) {
          msgDocumentMode = "DE: Dokumentmodus von Internet Explorer muss 9 oder gr\366sser sein.\nFR: Le mode de document d'Internet Explorer doit \352tre plus grand ou \351gal \340 9.\nIT: Modalit\340 documento dev'essere maggiore o uguale a 9.\nEN: The document mode of your navigator should be 9 or higher.\n\n";
       }
       if (navigator.userAgent.indexOf("MSIE 7.0") > 0 || navigator.userAgent.indexOf("MSIE 8.0") > 0) {
          msgCompatibilityView = "DE: Sie verwenden einen veralteten Browser. Um die Website in vollem Umfang nutzen zu k\366nnnen, empfehlen wir Ihnen in diesem Falle, einen neueren Browser zu installieren: www.browsehappy.com/?locale=de\nFR: Vous utilisez un navigateur trop ancien. Pour utiliser toute les possibilit\351s de ce site web, nous vous conseillons d'installer un navigateur plus r\351cent: www.browsehappy.com/?locale=fr\nIT:Si sta utilizzando un browser non completamente supportato. Per sfruttare appieno le funzionalit\340 di questo sito web, consigliamo di installare un browser pi\371 recente: www.browsehappy.com/?locale=it\nEN: You are using an outdated browser. Please upgrade in this case your browser to improve your experience: browsehappy.com/?locale=en\n\n";
       }
       if (msgDocumentMode.length > 0 || msgCompatibilityView.length > 0) {
         alert(msgDocumentMode + msgCompatibilityView + "DE: \334ber die 'F12' Taste k\366nnen Sie die Einstellungen auf 'Browsermodus:IE9' und 'Dokumentmodus:IE-9-Standards' setzen.\nFR: En appuyant sur F12, vous pouvez modifier l'affichage de compatibilit\351 en choisissant le mode navigateur IE9 et le mode de document normes IE9.\nIT: Premere F12 per modificare la Modalit\340 browser scegliendo poi 'Modalit\340 browser IE9' e 'Modalit\340 documento: IE9'.\nEN: Click on F12 and change the compatibility view mode and the document mode to 'Browser Mode:IE9' and 'Document Mode: IE9 standards'.");
       }
       })();
      </script>
      <script src="${s3basepath}lib/IE9Fixes.js"></script>
      <script>
        IE9Fix.call(this);
      </script>
    <![endif]-->

    <div ng-controller="GaSeoController">
      <div ga-seo ga-seo-options="options" ga-seo-map="map"></div>
    </div>
% if device != 'embed':
    <div ng-cloak translate-cloak id="header" class="navbar navbar-fixed-top" ng-class="{'host-not-prod': !globals.hostIsProd}">
      <!-- INGRID: Remove logo
      <a href="?topic={{topicId}}&lang={{langId}}">
        <div id="logo" class="pull-left ga-logo">
          <i class="fa fa-ga-logo-bund"></i>
          <div class="ga-logo-text"></div>
          <div class="ga-logo-text ga-subtitle-{{langId}}"></div>
        </div>
      </a>
      -->
      <!-- INGRID: Add 'role="search" ng-attr-aria-label="{{ 'navigation_search' | translate }}"' -->
      <div id="search-container" ng-controller="GaSearchController" role="search" ng-attr-aria-label="{{ 'navigation_search' | translate }}">
        <div ga-search ga-search-map="map" ga-search-options="options" ga-search-focused="globals.searchFocused" ga-search-ol3d="::ol3d"></div>
        <span ga-help="31,24,25" ga-help-options="{showOnHover:true}"></span>
        <!-- INGRID: Remove
        <div class="warning-not-prod" ng-if="!globals.hostIsProd">
          <span translate>test_host_warning</span>
        </div>
        -->
      </div>
      <!-- INGRID: Add 'role="navigation" ng-attr-aria-label="{{ 'navigation_service_menu' | translate }}"' -->
      <div id="toptools" ng-if="!globals.settingsShown" role="navigation" ng-attr-aria-label="{{ 'navigation_service_menu' | translate }}">
        <!-- INGRID: Remove
        <a ga-vector-tile-test-link></a>&nbsp;&nbsp;
        -->
        <div ga-fullscreen ga-fullscreen-map="map"></div>&nbsp;&nbsp;
        <!-- INGRID: Use 'globals.serviceAnnouncementUrl' to define href -->
        <div ng-if="globals.serviceAnnouncement">
          <a ng-if="!globals.serviceAnnouncementUrl" href="" ng-click="globals.feedbackPopupShown = !globals.feedbackPopupShown" role="button">
            <span translate>problem_announcement</span>
          </a>
          <a ng-if="globals.serviceAnnouncementUrl" href="{{globals.serviceAnnouncementUrl}}" target="_blank">
            <span translate>problem_announcement</span>
          </a>
          &nbsp;&nbsp;
        </div>
        <!-- INGRID: Edit href URL -->
        <a target="_blank" href="{{globals.serviceHelpUrl}}" translate>help_label</a>&nbsp;&nbsp;
        <!-- INGRID: Remove on iFrame -->
        <a class="ga-redirect" ng-if="!globals.isParentIFrame" href="{{deviceSwitcherHref}}" translate>mobile_redirect</a>&nbsp;&nbsp;
        <!-- INGRID: Remove on iFrame -->
        <div ng-controller="GaTranslationController" ng-if="!globals.isParentIFrame">
          <div ga-translation-selector ga-translation-selector-options="options"></div>
        </div>
      </div>
      <!-- INGRID: Change position of menu button -->
      <button class="btn ga-menu-bt" ng-click="globals.pulldownShown=true" translate><i class="fa fa-reorder" style="font-size:1.5em;"></i></button>
      ## css animation doesnt work on pseudo element, let use this instead
      <div class="ga-offline-msg alert-danger" translate>offline_sorry</div>
    </div> <!-- #header -->

    <!-- INGRID: Add ng-if="globals.isDrawActive" -->
    <div id="drawModeHeader" class="navbar navbar-fixed-top" ng-if="globals.isDrawActive">
      <div class="ga-centered ga-title" translate>draw_mode_title</div>
      <button class="btn btn-primary pull-left" ng-click="globals.isDrawActive = false">
        <i class="fa fa-arrow-left"></i>
        <span translate>draw_back</span>
      </button>
      <span ga-help="66"></span>
      <!-- INGRID: Add style="right:0" -->
      <button style="right:0" class="btn ga-menu-bt" ng-click="globals.pulldownShown=true" translate><i class="fa fa-reorder" style="font-size:1.5em;"></i></button>
      ## css animation doesnt work on pseudo element, let use this instead
      <div class="ga-offline-msg alert-danger" translate>offline_sorry</div>
    </div><!-- #drawModeHeader -->

% endif
    <div id="loader"></div>
    <div tabindex="1" ga-map ga-map-map="map" ga-map-ol3d="::ol3d">
  % if device == 'embed':
      <a ng-cloak translate-cloak id="bigMapLink" target="_blank" href="{{toMainHref}}">
        <div>
          <!-- INGRID: Remove icon 
          <i class="fa fa-ga-logo-bund"></i>
          -->
          <span translate-values="{{host}}" translate>view_on_mapgeoadminch</span>
        </div>
        <div ng-show="time">{{time}}</div>
      </a>
      <div id="search-container" ng-controller="GaSearchController">
        <div ga-search ga-search-map="map" ga-search-options="options" ga-search-ol3d="::ol3d"></div>
      </div>

      <div ga-scale-line ga-scale-line-map="map" ng-show="!globals.is3dActive"></div>
  % endif

      <!-- INGRID: Add 'role="navigation" ng-attr-aria-label="{{ 'navigation_map_buttons' | translate }}"' -->
      <div id='buttonGroup' ng-cloak translate-cloak role="navigation" ng-attr-aria-label="{{ 'navigation_map_buttons' | translate }}">
  % if device != 'embed':
        <div ga-geolocation ga-geolocation-map="::map" ga-geolocation-ol3d="::ol3d"></div>
  % endif
        <div id="zoomButtons"></div>
        <!-- INGRID: Add zoom to extent button -->
        <div id="zoomToExtentButton"></div>
        <div ga-tilt3d ng-if="globals.dev3d"></div>
  % if device != 'embed':
        <div ga-time-selector-bt ga-time-selector-bt-map="map"></div>
  % endif
        <div ga-rotate ga-rotate-map="map"></div>
  % if device != 'embed':
        <!-- INGRID: Disable save map
        <div ga-offline-bt></div>
        -->
  % endif
      </div>
  % if device != 'embed':
      <div ng-cloak translate-cloak
           ga-background-selector
           ga-background-selector-map="::map"
           ga-background-selector-ol3d="::ol3d">
      </div>
  % endif
      <div ga-swipe
           ga-swipe-map="map"
           ga-swipe-active="globals.isSwipeActive"
           style="display:none;">
      </div>
      <div ng-cloak translate-cloak
           ga-attribution
           ga-attribution-map="::map"
           ga-attribution-ol3d="::ol3d">
      </div>
    </div> <!-- #map -->

    <!-- 3d buttons and inspectors -->
    <div ng-cloak ng-if="globals.is3dActive && ol3d">
      <div ga-cesium-inspector
           ga-cesium-inspector-ol3d="::ol3d"></div>
      <div ga-cesium-3d-tiles-inspector
           ga-cesium-3d-tiles-inspector-ol3d="::ol3d"></div>
      <div ga-controls3d
           ga-controls3d-ol3d="::ol3d"
           ga-controls3d-fps-active="globals.isFpsActive"></div>
      <div ga-attribution-warning
           ga-attribution-warning-ol3d="::ol3d">
        <span translate>3d_overlay_warning</span>
      </div>
    </div>
    <div ng-cloak ga-offline-selector ga-offline-selector-map="::map"></div>
% if device != 'embed':
    <!-- INGRID: Add 'role="footer" ng-attr-aria-label="{{ 'navigation_footer' | translate }}"' -->
    <div ng-cloak translate-cloak id="footer" class="navbar navbar-fixed-bottom" role="footer" ng-attr-aria-label="{{ 'navigation_footer' | translate }}">
      <div  class="pull-left" ga-scale-line ga-scale-line-map="::map" ng-show="!globals.is3dActive"></div>
      <div id="mouseposition" class="pull-left" ng-controller="GaMousePositionController">
        <select ng-model="options.projection"
                ng-options="p.label for p in ::mousePositionProjections">
        </select>
        <div ga-mouse-position
             ga-mouse-position-map="::map"
             ga-mouse-position-ol3d="::ol3d"
             ga-mouse-position-options="options"></div>
      </div>
      <!-- INGRID: Add accessibility and add 'href="#"' -->
      <div class="pull-right" ng-if="globals.enableAccessibilityFooter" >
        <a role="button" tabindex="0" onclick="window.open(settings.settingAccessibilityUrl, 'blank')" translate>accessibility_label</a>
      </div>
      <div class="pull-right">
        <!-- INGRID: Edit href URL and add 'href="#"' -->
        <a role="button" tabindex="0" onclick="window.open(settings.settingCopyrightURL, 'blank')" translate>copyright_label</a>
      </div>
      <div class="pull-right">
        <!-- INGRID: Edit href URL and add 'href="#"' -->
        <a role="button" tabindex="0" onclick="window.open(settings.settingDisclaimerURL, 'blank')" translate>disclaimer_label</a>
      </div>
      <div class="pull-right">
        <!-- INGRID: Edit href URL and add 'href="#"' -->
        <a role="button" tabindex="0" onclick="window.open(settings.settingSitemapURL, 'blank')" translate>Sitemap</a>
      </div>
      <!-- INGRID: Add help -->
      <div class="pull-right" ng-if="globals.enableHelpFooter">
        <a role="button" tabindex="0" onclick="window.open(settings.settingServiceHelpUrl, 'blank')" translate>help_label</a>
      </div>
    </div><!-- #footer -->

    <div ng-controller="GaContextPopupController">
      <div ga-context-popup
           ga-context-popup-map="::map"
           ga-context-popup-options="::options"
           ga-context-popup-active="!globals.is3dActive && !globals.isDrawActive">
      </div>
    </div>
% endif

    <div ga-timestamp-control ga-timestamp-control-map="map"></div>

% if device != 'embed':
    <div ng-controller="GaTimeSelectorController">
      <div ga-time-selector
           ga-time-selector-map="::map"
           ga-time-selector-ol3d="::ol3d"
           ga-time-selector-options="options">
      </div>
    </div>

    <!-- Display a modal if the page has been open by the shop -->
    <div ga-shop-msg></div>
% endif

    <div ng-controller="GaTooltipController">
      <div ga-tooltip
           ga-tooltip-map="::map"
           ga-tooltip-ol3d="::ol3d"
           ga-tooltip-options="options"
           ga-tooltip-active="!globals.feedbackPopupShown && !globals.isDrawActive">
      </div>
    </div>

% if device != 'embed':
    <!-- INGRID: Add 'role="navigation" ng-attr-aria-label="{{ 'navigation_main_menu' | translate }}"' -->
    <div  id="pulldown" ng-cloak translate-cloak
          role="navigation" ng-attr-aria-label="{{ 'navigation_main_menu' | translate }}"
          ng-class="{
            'selection-and-catalog-shown': (globals.catalogShown && globals.selectionShown),
            'ga-pulldown-shown': globals.pulldownShown
          }">
      <div class="ga-visible-mobile ga-pulldown-shadow" ng-click="globals.pulldownShown = false" role="button"></div>
      <div id="pulldown-content" class="content">
        <!-- Share -->
        <div class="panel">
          <!-- INGRID: Add 'role="button"' -->
          <a id="shareHeading" class="panel-heading accordion-toggle collapsed"
             data-toggle="collapse" data-parent="#pulldown-content" href="#share"
             role="button"
             ga-collapsible-show="globals.isShareActive">
            <i class="fa fa-caret-down"></i>
            <span translate>share</span>
          </a>
          <div id="share" class="panel-collapse collapse">
            <div class="panel-body" ng-controller="GaShareController">
              <div ga-share ga-share-options="options" ga-share-active="globals.isShareActive"></div>
            </div>
          </div>
        </div> <!-- .panel -->

        <!-- Print -->
        <div class="panel" ng-show="!globals.is3dActive">
          <!-- INGRID: Add 'role="button"' -->
          <a id="printHeading" class="panel-heading accordion-toggle collapsed"
             data-toggle="collapse" data-parent="#pulldown-content" href="#print"
             role="button"
             ga-collapsible-show="globals.isPrintActive">
            <i class="fa fa-caret-down"></i>
            <span translate>print</span>
          </a>
          <div id="print" class="panel-collapse collapse">
            <div class="panel-body" ng-controller="GaPrintController">
              <div ga-print
                   ga-print-map="map"
                   ga-print-options="options"
                   ga-print-active="globals.isPrintActive"></div>
            </div>
          </div>
        </div>  <!-- .panel -->

        <!-- Draw -->
        <div class="panel" ng-show="!globals.is3dActive">
          <!-- INGRID: Add 'role="button"' -->
          <a id="drawHeading" class="panel-heading accordion-toggle collapsed"
             data-toggle="collapse" data-parent="#pulldown-content" href="#draw"
             role="button"
             ga-collapsible-show="globals.isDrawActive" accesskey="r">
            <i class="fa fa-caret-down"></i>
            <span translate>draw_panel_title</span>
          </a>
          <div id="draw" class="panel-collapse collapse">
            <div class="panel-body" ng-controller="GaDrawController">
              <div ga-draw
                   ga-draw-map="map"
                   ga-draw-options="options"
                   ga-draw-active="globals.isDrawActive">
              </div>
            </div>
          </div>
        </div> <!-- .panel -->

        <!-- Tools -->
        <div class="panel">
          <!-- INGRID: Add 'role="button"' -->
          <a id="toolsHeading" class="panel-heading accordion-toggle collapsed"
             role="button"
             data-toggle="collapse" data-parent="#pulldown-content" href="#tools">
            <i class="fa fa-caret-down"></i>
            <span translate>map_tools</span>
          </a>
          <div id="tools" class="collapse">
            <div class="panel-body panel-body-wide panel-cursor">
              <ul>
                <li><!-- Import -->
                  <a href="" accesskey="w" role="button" aria-haspopup="dialog"
                     ng-click="globals.importPopupShown = !globals.importPopupShown"
                     translate-attr="{title: 'import_tooltip'}">
                    <span ng-class="{'selected': globals.importPopupShown}" translate>import</span>
                  </a>
                </li>
                <li ng-show="!globals.is3dActive"><!-- Compare -->
                  <a href=""  accesskey="c" role="button"
                     ng-click="globals.isSwipeActive = !globals.isSwipeActive"
                     translate-attr="{title: 'swipe_tooltip'}">
                    <span ng-class="{'selected': globals.isSwipeActive}" translate>swipe</span>
                  </a>
                </li>
                <!-- INGRID: Disable 'object_information' -->
                <li ng-show="false" ng-if="globals.queryShown"><!-- Feature Tree -->
                  <a href="" accesskey="s" role="button" aria-haspopup="dialog"
                     ng-click="globals.isFeatureTreeActive = !globals.isFeatureTreeActive"
                     translate-attr="{title: 'featuretree_tooltip'}">
                    <span  ng-class="{'selected': globals.isFeatureTreeActive}" translate>object_information</span>
                  </a>
                </li>
              </ul>
            </div>
          </div>
        </div> <!-- .panel -->

        <!-- Catalog -->
        <!-- INGRID: Add '|| globals.isHideCatalog' -->
        <div class="panel" ng-hide="globals.isDrawActive || globals.isHideCatalog">
          <div class="theme-toggle">
            <a class="topic-modal-toggle" data-toggle="modal" data-target="#topicSelector .modal" href="#">
              <span translate>choose_theme</span>
            </a>
          </div>
          <!-- INGRID: Add 'data-parent="#pulldown-content"' -->
          <!-- INGRID: Add 'role="button"' -->
          <a id="catalogHeading" class="panel-heading accordion-toggle light collapsed"
             data-toggle="collapse" data-parent="#pulldown-content" href="#catalog"
             role="button"
             ga-collapsible-show="globals.catalogShown">
            <i class="fa fa-caret-down"></i>
            <span>{{topicId | translate}}</span>
            <span ga-help="32,37,39" ga-help-options="{showOnHover:true}"></span>
          </a>
          <div id="catalog" class="collapse" ng-controller="GaCatalogtreeController">
            <div class="panel-body panel-body-wide accordion-inner-catalog"
                 ng-if="!globals.offline"
                 ga-catalogtree ga-catalogtree-map="map" ga-catalogtree-options="options">
            </div>
          </div>
        </div> <!-- .panel -->

        <!-- Selection -->
        <div class="panel" ng-hide="globals.isDrawActive">
          <!-- INGRID: Remove and de/activate all layers -->
          <div class="theme-toggle" ng-if="hasAddedLayers()">
              <!-- INGRID: Add aria-label -->
              <button class="topic-modal-toggle ga-btn ga-icon fa fa fa-remove-sign" ng-click="removeLayers($event)" aria-label="{{ 'fa_icon_remove_all_layers'}"></button>
              <!-- INGRID: Add aria-label -->
              <input class="topic-modal-toggle" type="checkbox" ng-model="hasAllActivatedLayers.active" ng-model-options="{ getterSetter: true }" aria-label="{{ 'fa_icon_activate_all_layers'}"/>
          </div>
          <!-- INGRID: Add 'data-parent="#pulldown-content"' -->
          <!-- INGRID: Add 'role="button"' -->
          <a id="selectionHeading" class="panel-heading accordion-toggle light collapsed"
             data-toggle="collapse" data-parent="#pulldown-content" href="#selection"
             role="button"
             ga-collapsible-show="globals.selectionShown">
            <i class="fa fa-caret-down"></i>
            <span translate>layers_displayed</span>
            <span ga-help="34,35,36" ga-help-options="{showOnHover:true}"></span>
          </a>
          <div id="selection" class="collapse">
            <div class="panel-body panel-body-wide" ga-layermanager ga-layermanager-map="map">
            </div>
            <div class="ga-more-layers" ng-click="hidePulldownOnXSmallScreen()">
              <a href="" ga-help-highlight=".ga-search-input-container input" role="button" translate>
                help_search_data_link
              </a>
            </div>
          </div>
        </div> <!-- .panel -->

        <div class="panel" ng-if="globals.settingsShown">
          <!-- INGRID: Add 'role="button"' -->
          <a class="panel-heading accordion-toggle collapsed" data-toggle="collapse" data-parent="#pulldown-content" href="#settings" role="button">
            <i class="fa fa-caret-down"></i>
            <span translate>settings</span>
          </a>
          <div id="settings" class="collapse">
            <div class="panel-body">
              <p>
                <a href="" ng-click="globals.feedbackPopupShown = !globals.feedbackPopupShown" role="button" aria-haspopup="dialog">
                  <span ng-class="{'selected': globals.feedbackPopupShown}" translate>problem_announcement</span>
                </a>
              </p>
              <!-- INGRID: Add 'ng-if="!globals.isParentIFrame"' -->
              <div class="options" ng-if="!globals.isParentIFrame">
                <label ng-controller="GaTranslationController">
                  <span translate>lang_chooser_label</span>
                  <div ga-translation-selector ga-translation-selector-options="options"></div>
                </label>
              </div>
              <hr>
              <p>
                <!-- INGRID: Remove
                <a target="_blank" translate translate-attr="{href: topicId + '_service_link_href'}">{{topicId + '_service_link_label'}}</a>
                <br>
                -->
                <!-- INGRID: Edit and add 'href="#"' -->
                <div ng-if="globals.enableHelpFooter">
                 <a role="button" tabindex="0" onclick="window.open(settings.settingServiceHelpUrl, 'blank')" translate>help_label</a>
                 <br>
                </div>
                <a role="button" tabindex="0" onclick="window.open(settings.settingSitemapURL, 'blank')" translate>Sitemap</a>
                <br>
                <a role="button" tabindex="0" onclick="window.open(settings.settingCopyrightURL, 'blank')" translate>copyright_label</a>
                <br>
                <a role="button" tabindex="0" onclick="window.open(settings.settingDisclaimerURL, 'blank')" translate>disclaimer_label</a>
                <br>
                <div ng-if="globals.enableAccessibilityFooter">
                  <a role="button" tabindex="0" onclick="window.open(settings.settingAccessibilityUrl, 'blank')" translate>accessibility_label</a>
                </div>
              </p>
            </div>
          </div>
        </div> <!-- .panel -->

        <!-- INGRID: Add 'ng-attr-aria-pressed="{{ !globals.pulldownShown }}"' -->
        <button id="menu-button" class="btn btn-default"
                ng-attr-aria-pressed="{{ !globals.pulldownShown }}"
                ng-click="globals.pulldownShown=!globals.pulldownShown">
          <span class="ga-hidden-mobile">
            <i class="fa fa-caret-down"></i>
            <span class="ga-hidden-collapsed" translate>close_menu</span>
            <span class="ga-visible-collapsed" translate>open_menu</span>
          </span>
          <span class="ga-visible-mobile" translate>close</span>
        </button>
      </div> <!-- #pulldown-content -->
    </div> <!-- #pulldown -->

    <!-- Modal: offline menu -->
    <div ng-cloak translate-cloak ga-offline-menu ga-offline-menu-map="map"></div>

    <!-- Modal: topics selection -->
    <div id="topicSelector" ng-cloak translate-cloak ga-topic></div>

    <!-- Modal: draw share -->
    <div ng-cloak translate-cloak ga-share-draw></div>

    <!-- Modal: embed share -->
    <div ng-cloak translate-cloak ga-share-embed></div>

    <!-- Popup: Feedback -->
    <div ga-popup="globals.feedbackPopupShown"
         ga-popup-options="{title:'problem_announcement', help:'70'}"
         ga-draggable=".popover-title"
         id="feedback-popup"
         class="ga-popup-mobile-bottom">
      <div ng-controller="GaFeedbackController">
        <div ga-feedback
             ga-feedback-map="map"
             ga-feedback-options="options"
             ga-feedback-active="globals.feedbackPopupShown">
        </div>
      </div>
    </div> <!-- end Feedback -->

    <!-- Popup: Import -->
    <div ng-if="globals.importPopupShown"
         ga-popup="globals.importPopupShown"
         ga-popup-options="{title:'import', help:'62'}"
         ga-draggable=".popover-title"
         id="import-popup"
         class="ga-popup-mobile-bottom">
      <div ng-controller="GaImportController">
        <div ga-import
             ga-import-map="::map"
             ga-import-options="::options">
        </div>
      </div>
    </div> <!-- end Import -->

    <!-- Popup: Profile -->
    <div ng-controller="GaProfilePopupController">
      <div ga-popup="toggle"
           ga-popup-options="options"
           id="profile-popup"
           class="ga-popup-bottom">
        <div ng-controller="GaProfileController">
          <div ng-if="toggle && !options.isReduced"
               ga-profile="feature"
               ga-profile-map="::map"
               ga-profile-layer="layer"
               ga-profile-options="options">
          </div>
        </div>
      </div>
    </div><!-- end Profile -->

    <!-- Popup: Draw style -->
    <div ng-controller="GaDrawStylePopupController">
      <div ga-popup="toggle"
           ga-popup-map="::map"
           ga-popup-options="options"
           id="draw-style-popup"
           class="ga-popup-mobile-bottom bottom">
        <div ng-controller="GaDrawStyleController">
          <div ng-if="toggle"
               ga-draw-style="feature"
               ga-draw-style-layer="layer"
               ga-draw-style-options="options">
          </div>
        </div>
      </div>
    </div><!-- end Draw style -->

    <!-- Popup: Feature Tree -->
    <div ng-controller="GaFeaturetreeController">
      <div ga-popup="globals.isFeatureTreeActive"
           ga-popup-options="{title:'object_information', showPrint:true, print: print, help:'68'}"
           ga-draggable=".popover-title"
           id="featuretree-popup"
           class="ga-popup-mobile-bottom">
        <div class="panel-group" id="accordion">
          <div class="panel panel-default">
            <a class="panel-heading" data-toggle="collapse" data-parent="#accordion" href="#accordion-query">
              <span translate>queries</span>
            </a>
            <div id="accordion-query" class="panel-collapse collapse in">
              <div class="panel-body"
                   ga-query
                   ga-query-map="map"
                   ga-query-options="options"
                   ga-query-active="!globals.is3dActive"
                   ga-query-results-active="globals.isFeatureTreeActive">
              </div>
            </div>
          </div>
          <div class="panel panel-default">
            <a class="panel-heading collapsed" data-toggle="collapse" data-parent="#accordion" href="#accordion-tree"
               ga-collapsible-show="options.featuresShown" ng-class="{'ga-query-more-results': options.hasMoreResults}">
              <span translate>items</span> {{getItemText()}}
              <div ng-show='printInProgress' class='pull-right'>{{printProgressPercentage}}%</div>
            </a>
            <div id="accordion-tree"
                 class="panel-collapse collapse">
              <div ng-show="options.nbFeatures == 0" class="panel-body">
                <div class="ga-no-result" translate>no_feature_results</div>
              </div>
              <div ng-show="options.nbFeatures > 0"
                   ga-featuretree
                   ga-featuretree-map="map"
                   ga-featuretree-options="options"
                   ga-featuretree-active="globals.isFeatureTreeActive">
              </div>
            </div>
          </div>
        </div>
      </div>
    </div><!-- end Feature Tree -->

    <div ng-controller="GaImportController">
      <div ng-if="::supportDnd"
           ga-import-dnd
           ga-import-dnd-options="::options">
      </div>
    </div>

    <div ng-if="globals.homescreen" class="popover homescreen"
         ng-class="{
           'visible': globals.homescreen,
           'bottom': globals.tablet,
           'top': !globals.tablet,
           'tr': (globals.ios >= 8)
         }">
      <div class="arrow"></div>
      <div class="popover-title">
        <span translate>homescreen_title</span>
        <!-- INGRID: Add aria-label -->
        <button type="button" class="ga-icon ga-btn fa fa-remove" ng-click="globals.homescreen=false" aria-label="{{ 'homescreen_title' | translate }}"></button>
      </div>
      <div class="popover-content">
        <i class="fa fa-share"></i>&nbsp;
        <span translate>homescreen_content</span>
      </div>
    </div>
% endif

% if mode == 'prod':

    <!-- INGRID: Remove '${versionslashed}' -->
    <script>
      window.CESIUM_BASE_URL="${s3basepath}lib/Cesium/";
    </script>
    <!-- INGRID: Remove '${versionslashed}' -->
    <script src="${s3basepath}lib/build.js"></script>
    <!-- INGRID: Remove '${versionslashed}' -->
    <!-- For <= IE9, we load it explicitely as XDomain does not support
         dynamic/lazy loading of javascript -->
    <!--[if (IE)&(lte IE 9)]>
    <script src="${s3basepath}lib/bootstrap-datetimepicker.min.js"></script>
    <script src="${s3basepath}lib/d3.min.js"></script>
    <script src="${s3basepath}lib/jquery.xdomainrequest.min.js"></script>
    <![endif]-->
% else:
    <!-- in source, we need to load it here because IE9 ignores it in
         the comments for reasons unknown to me. In prod, it's only
         loaded in IE9 -->
    <script src="${s3basepath}lib/polyfill.js"></script>
    <script src="${s3basepath}lib/IE9Fixes.js"></script>
    <script>
      //This call only affects browser <= IE9
      IE9Fix.call(this);
    </script>
    <script src="${s3basepath}lib/jquery.js"></script>
    <script src="${s3basepath}lib/jQuery.XDomainRequest.js"></script>
    <script src="${s3basepath}lib/slip.js"></script>
    <script src="${s3basepath}lib/angular.js"></script>
    <script src="${s3basepath}lib/angular-translate.js"></script>
    <script src="${s3basepath}lib/angular-translate-loader-static-files.js"></script>
    <script src="${s3basepath}lib/d3.js"></script>
    <script src="${s3basepath}lib/bootstrap.js"></script>
    <script src="${s3basepath}lib/typeahead.jquery.js"></script>
    <script src="${s3basepath}lib/proj4js-compressed.js"></script>
    <script src="${s3basepath}lib/EPSG21781.js"></script>
    <script src="${s3basepath}lib/EPSG2056.js"></script>
    <script src="${s3basepath}lib/EPSG32631.js"></script>
    <script src="${s3basepath}lib/EPSG32632.js"></script>
    <script src="${s3basepath}lib/fastclick.js"></script>
    <script src="${s3basepath}lib/localforage.js"></script>
    <script src="${s3basepath}lib/filesaver.js"></script>
    <script src="${s3basepath}lib/moment-with-customlocales.js"></script>
    <script src="${s3basepath}lib/gyronorm.complete.js"></script>
    <script src="${s3basepath}lib/Cesium/Cesium.js"></script>


    <!-- Use Closure to load the application scripts -->
    <script>
      window.CLOSURE_NO_DEPS = true;
    </script>

    <script src="${s3basepath}lib/ol.js"></script>
    <script src="${s3basepath}lib/olcesium-debug.js"></script>
    <script src="${s3basepath}deps.js"></script>
    <script>
      goog.require('geoadmin');
    </script>
% endif

    <!-- INGRID: Add html compile module -->
    <script src="../src/lib/angular-bind-html-compile.js"></script>

    <!-- INGRID: Add projections -->
    <script src="../src/lib/EPSG25832.js"></script>
    <script src="../src/lib/EPSG25833.js"></script>
    <script src="../src/lib/EPSG31466.js"></script>
    <script src="../src/lib/EPSG31467.js"></script>
    <script src="../src/lib/EPSG31468.js"></script>
    <script src="../src/lib/EPSG31469.js"></script>
    <script src="../src/lib/EPSG2166.js"></script>
    <script src="../src/lib/EPSG2167.js"></script>
    <script src="../src/lib/EPSG2168.js"></script>

    <script>
      window.addEventListener('load', function() {
        FastClick.attach(document.body);
      }, false);
    </script>

% if device == 'embed':
    <script>
      window.addEventListener('load', function() {
        if (window.name !== "embed" && window.location == window.parent.location) {
          document.body.innerHTML = "<span translate-values=\"{{host}}\" translate>view_in_iframe</span>"
        }
      }, false);
    </script>
% endif

    <script>
      (function() {
        // Make sure ajax is using cached requests
        $.ajaxSetup({
          cache: true
        });
        function getParam(name) {
          return decodeURIComponent((new RegExp('[?|&]' + name + '=' + '([^&;]+?)(&|#|;|$)').exec(location.search)||[,""])[1].replace(/\+/g, '%20')) || null;
        }

        var configs = {};
        // prod env variables
        <%include file="../config.dev.mako"/>
        // int env variables
        <%include file="../config.int.mako"/>
        // dev env variables
        <%include file="../config.prod.mako"/>

        var supportedEnv = ['dev', 'int', 'prod'];
        var requestedStaging = getParam('staging') ;
        var staging = '${staging}';
        if (requestedStaging) {
            staging = requestedStaging;
        }
        var cfg = configs[staging];

        var adminUrlRegexp = new RegExp(cfg['admin_url_regexp']);
        var module = angular.module('geoadmin');
        var cacheAdd = cfg['version'] != '' ? '/' + cfg['version'] : '';
        var pathname = location.pathname.replace(/(index|mobile|embed)\.html$/g, '');
        var s3pathname = cfg['s3basepath'] == '' ? pathname : cfg['s3basepath'];
        var prtl = location.protocol;
        var hostIsProd = true;

        if (/.*\.(dev|int|ci|infra|prod)\.bgdi\.ch$/.test(location.hostname)) {
          hostIsProd = false;
        }

        // Determines if one is using custom prodUrl (for user env)
        var userEnvRegexp = new RegExp('\/\/.*(\/[a-z]*)');
        // Force env via parameter for testing purposes (before Varnish)
        var env = getParam('env');
        function setBackend(prodUrl, techUrl, overwriteParam) {
          var url = prodUrl;
          if (env && env != 'prod' && supportedEnv.indexOf(env) !== -1) {
              url = techUrl + env + cfg['tech_suffix'];
          }
          var overwrite = prtl + getParam(overwriteParam);
          url = adminUrlRegexp.test(overwrite) ? overwrite : url;
          return url;
        }

        // Determines if tooltip should be disabled for this instance of map
        var disableTooltip = getParam('disableTooltip') === 'true';

        // Determines if we're on a personal build on dev with pathname /ltxxxx/
        if (!requestedStaging && staging == 'dev' && (/\/lt.*\/$/.test(pathname))) {
            cfg['config_url'] += pathname.replace(/\/$/, '');
        }

        // Map services urls
        var wmsUrl = setBackend(prtl + cfg['wms_url'],  prtl + cfg['wms_tech_url'], 'wms_url');
        var wmtsUrl = setBackend(prtl + cfg['wmts_url'], prtl + cfg['wmts_tech_url'], 'wmts_url');
        var terrainUrl = setBackend(prtl + cfg['terrain_url'], prtl + cfg['terrain_tech_url'], 'terrain_url');
        var vectorTilesUrl = setBackend(prtl + cfg['vectortiles_url'], prtl + cfg['vectortiles_tech_url'], 'vectortiles_url');

        // Api services urls
        var defaultApiUrl = prtl + cfg['api_url'];
        // INGRID: Change URL
        var apiUrl = location.origin + '/ingrid-webmap-client/rest/data';
        var configUrl = setBackend(prtl + cfg['config_url'], prtl + cfg['config_tech_url'], 'config_url');
        var altiUrl = setBackend(prtl + cfg['alti_url'], prtl + cfg['alti_tech_url'], 'alti_url');
        var shopUrl = setBackend(prtl + cfg['shop_url'], prtl + cfg['shop_tech_url'], 'shop_url');
        // INGRID: Change URL
        var publicUrl = location.origin + '/ingrid-webmap-client/rest/data';
        var printUrl = setBackend(prtl + cfg['print_url'], prtl + cfg['print_tech_url'], 'print_url');
        // INGRID: Change URL
        var proxyUrl = location.protocol + '//' + location.host + '/ingrid-webmap-client/rest/wms/proxy/?url=';
        var apiOverwrite = !!(getParam('api_url') || env);
        var configOverwrite = !!(getParam('config_url') || env);
        var localhostRegexp = new RegExp('https?:\/\/localhost:[0-9]{1,5}');
        if (localhostRegexp.test(wmtsUrl)){
           wmtsUrl = wmtsUrl.replace('https:', 'http:');
        }
        module.constant('gaGlobalOptions', {
          //dev3d to be removed once 3d goes live
          // INGRID: Disabled dev3d
          dev3d: settings.settingEnable3D || false,
          buildMode: cfg['mode'],
          version: cfg['version'],
          mapUrl: location.origin + pathname,

          // Map services urls
          wmsUrl: wmsUrl,
          wmtsUrl: wmtsUrl,
          terrainUrl: terrainUrl,
          vectorTilesUrl: vectorTilesUrl,

          // Api services urls
          apiUrl: apiUrl,
          configUrl: configUrl,
          altiUrl: altiUrl,
          printUrl: printUrl,
          proxyUrl: proxyUrl,
          shopUrl: shopUrl,
          publicUrl: publicUrl,
          // INGRID: Change RegExp
          publicUrlRegexp: new RegExp('ingrid-webmap-client\/rest\/data\/'),
          adminUrlRegexp: adminUrlRegexp,
          hrefRegexp: new RegExp(cfg['href_regexp']),
          cachedApiUrl: apiUrl + cacheAdd,
          cachedAltiUrl: altiUrl + cacheAdd,
          imageryMetadataUrl: terrainUrl + '/imagery/',
          cachedPrintUrl: printUrl + cacheAdd,
          // INGRID: Remove "cfg['git_commit_short'] + '/'"
          resourceUrl: location.origin + s3pathname,
          // INGRID: Read setting from settings
          w3wUrl: settings.w3wUrl,
          lv03tolv95Url: 'https://geodesy.geo.admin.ch/reframe/lv03tolv95',
          lv95tolv03Url: 'https://geodesy.geo.admin.ch/reframe/lv95tolv03',
          // INGRID: Read setting from settings
          w3wApiKey: settings.w3wApiKey,
          whitelist: [
            'https://' + window.location.host + '/**',
            'https://www.googleapis.com/**'
          ],

          // App state values
          // INGRID: Read setting from settings
          defaultTopicId: settings.settingDefaultTopicId || '${default_topic_id}',
          translationFallbackCode: '${translation_fallback_code}',
          // INGRID: Remove '${languages}'
          languages: settings.settingLanguages || JSON.parse('["de", "en"]'),
          hostIsProd: hostIsProd,
          staging: staging,
          apiOverwrite: apiOverwrite,
          configOverwrite: configOverwrite,
          disableTooltip: disableTooltip,

          // INGRID settings
          // INGRID: Change REST image URL
          imgproxyUrl : location.protocol + '//' + location.host + '/ingrid-webmap-client/rest/data/images/?url=',
          // INGRID: Change search services URL (Opensearch)
          searchServiceUrl : settings.settingSearchServiceUrl,
          // INGRID: Change search nominatim
          searchNominatimUrl : settings.settingSearchNominatimUrl,
          // INGRID: Add search BwaLocator
          searchBwaLocatorUrl : settings.settingSearchBwaLocatorUrl,
          // INGRID: Add search BwaLocator Geo
          searchBwaLocatorGeoUrl : settings.settingSearchBwaLocatorGeoUrl,
          // INGRID: Add search BwaLocator Station
          searchBwaLocatorStationUrl : settings.settingSearchBwaLocatorStationUrl,
          // INGRID: Add search BwaLocator Station
          bwaStrFinderLayers : settings.settingBwaStrFinderLayers,
          // INGRID: Short URL service (external)
          shortURLService : settings.settingShortURLService || 'https://is.gd/create.php?format=json',
          // INGRID: Add property to check is in iFrame
          isParentIFrame: window.document.referrer.length == 0 ? false : (window.document.referrer.indexOf(window.location.host) > -1 ? (window.parent.iframe ? true : false) : true),
          // INGRID: Load map images over rest
          defaultCrossOrigin: false,
          // INGRID: KML download name
          settingKMLName: settings.settingKMLName || 'INGRID',
          // INGRID: Available list of services to import
          settingDefaultImportList: settings.settingDefaultImportList || [],
          // INGRID: Import WMS as single tile
          settingImportWMSSingleTile: settings.settingServiceImportSingleTile,
          // INGRID: Import WMS as single tile
          settingImportWMSGutter: settings.settingServiceImportWMSGutter || 0,
          // INGRID: Print URL service (external)
          printServiceUrl : settings.settingPrintServiceUrl || '/ingrid-webmap-client/pdf/info.json',
          // INGRID: Add print logo url
          printLogo: settings.settingPrintLogo.replace('{location.protocol}',location.protocol).replace('{location.host}',location.host),
          // INGRID: Add print north arrow logo url
          printNorthArrow: settings.settingPrintNorthArrow.replace('{location.protocol}',location.protocol).replace('{location.host}',location.host),
          // INGRID: Add print filename
          printFilename: settings.settingPrintFilename,
          // INGRID: Print depend on mouse position control
          printDependOnMouseProj: settings.settingPrintDependOnMouseProj,
          // INGRID: Add use geodesic
          useGeodesic: settings.settingUseGeodesic || true,
          // INGRID: Add default mouse position
          defaultMouseProjections: settings.settingDefaultMouseProjections,
          // INGRID: Add print graticule
          defaultPrintGraticuleLayer: settings.settingPrintGraticuleLayer,
          // INGRID: Add setting to hide catalog menu
          isHideCatalog: settings.settingHideCatalog,
          // INGRID: Add setting to define zoom level of gazetter search
          gazetterZoom: settings.settingGazetterZoom || 10,
          // INGRID: Enable what3words
          enableW3W: settings.settingEnableW3W || false,
          // INGRID: Show service name of layer
          showLayerServiceName: settings.settingShowLayerServiceName || false,
          // INGRID: Show service tree of layer
          showLayerServiceTree: settings.settingShowLayerServiceTree || false,
         // INGRID: Check layer in range
          checkLayerInRange: settings.settingCheckLayerInRange || false,
          // INGRID: Show iso xml link on service search info
          showISOXML: settings.settingShowISOXML,
          // INGRID: Change coords XY for search
          searchCoordsXY: settings.settingSearchCoordsXY,
          // INGRID: Add zoom for coordinate search
          searchCoordsZoom: settings.settingSearchCoordsZoom,
          // INGRID: Add zoom for WFS feature point zoom
          wfsFeaturePointZoom: settings.settingWFSFeaturePointZoom,
          // INGRID: Enable share facebook
          enableShareFacebook: settings.settingShareFacebook,
          // INGRID: Enable share mail
          enableShareMail: settings.settingShareMail,
          // INGRID: Enable share twitter
          enableShareTwitter: settings.settingShareTwitter,
          // INGRID: Enable share iFrame
          enableShareIFrame: settings.settingShareIFrame,
          // INGRID: Enable share link
          enableShareLink: settings.settingShareLink,
          // INGRID: Enable share QR
          enableShareQR: settings.settingShareQR,
          // INGRID: Enable share Whatsapp
          enableShareWhatsapp: settings.settingShareWhatsapp,
          // INGRID: Announcement
          serviceAnnouncement: settings.settingServiceAnnouncement,
          // INGRID: Announcement token seconds
          serviceAnnouncementMailToken: settings.settingAnnouncementMailToken,
          // INGRID: Announcement token seconds
          serviceAnnouncementMailRequired: settings.settingAnnouncementMailRequired,
          // INGRID: Announcement URL
          serviceAnnouncementUrl: settings.settingServiceAnnouncementUrl,
          // INGRID: Help URL
          serviceHelpUrl: settings.settingServiceHelpUrl || '/hilfe?hkey=maps-1',
          // INGRID: Help footer
          enableHelpFooter: settings.settingServiceHelpFooter,
          // INGRID: Accessibility URL
          accessibilityUrl: settings.settingAccessibilityUrl || '/barrierefreiheit',
          // INGRID: Accessibility footer
          enableAccessibilityFooter: settings.settingAccessibilityFooter,
          // INGRID: Service reverse import all layers
          serviceReverseImport: settings.settingServiceReverseImport || false,
          // INGRID: Service import display ident import popup
          serviceDisplayIdentPopupImport: settings.settingServiceDisplayIdentPopupImport || false,
          // INGRID: Service import all layers with identifier
          serviceMultiIdentImport: settings.settingServiceMultiIdentImport || false,
          // INGRID: Service import all layers by add without identifier
          serviceAllWithoutIdentImport: settings.settingServiceAllWithoutIdentImport || false,
          // INGRID: Service import all layers by add without identifier
          serviceImportSingleLayer: settings.settingServiceImportSingleLayer || false,
          // INGRID: Replace copyright string
          defaultDataOwnerReplacements: settings.settingDataOwnerReplacements,
          // Map state values
          // INGRID: Read setting from settings
          defaultExtent: settings.settingExtent || JSON.parse(${default_extent}),
          defaultResolution: ${default_resolution},
          // INGRID: Read setting from settings
          defaultEpsg: settings.settingEpsg || '${default_epsg}',
          // INGRID: Read setting from settings
          defaultEpsgExtent:  settings.settingEpsgExtent || JSON.parse(${default_epsg_extend}),
          defaultElevationModel: '${default_elevation_model}',
          // INGRID: Change to settingDefaultTerrain
          defaultTerrain: settings.settingDefaultTerrain,
          defaultLod: ${default_level_of_detail},
          resolutions: JSON.parse(${resolutions}),
          lods: JSON.parse(${level_of_details}),
          tileGridOrigin: JSON.parse(${tilegrid_origin}),
          tileGridResolutions: JSON.parse(${tilegrid_resolutions}),
          tileGridWmtsDfltMinRes: ${tilegrid_wmts_dflt_min_res}
        });
      })();

      /**
       *  Workaround for iOS 6.x bug: content shifted after orientation change
       *  As we can't use css fix ( see http://stackoverflow.com/a/12518946/29655 )
       *  we force a redraw on orientation change
       *  ( see http://stackoverflow.com/a/13235711/29655 )
       */
      (function(){
        $(window).on('orientationchange', function(){
          $('#header').hide();
          setTimeout(function(){
            $('#header').show();
            // iOS 7 minimal-ui meta tag bug
            window.scrollTo(0, 0);
          }, 0);
        });
      })();
    </script>
  </body>
</html>
