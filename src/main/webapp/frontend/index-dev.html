<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
       "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">	
	<title>InGrid Map Client</title>

	<script type="text/javascript" src="../lib/extjs/adapter/ext/ext-base-debug.js"></script>
	<script type="text/javascript" src="../lib/extjs/ext-all-debug.js"></script>
	<script type="text/javascript" src="../lib/openlayers/lib/OpenLayers.js"></script>
	<script type="text/javascript" src="../lib/geoext/lib/GeoExt.js"></script>

	<link rel="stylesheet" type="text/css" href="../lib/extjs/resources/css/ext-all.css" />
	<link rel="stylesheet" type="text/css" href="css/style.css" />
	
	<!-- see http://www.peterrobins.co.uk/it/olchangingprojection.html -->
	<!--script type="text/javascript" src="http://proj4js.org/lib/proj4js-compressed.js" /-->
	
	<!-- openlayers addins -->
	<script type="text/javascript" src="../lib/openlayers/addins/LoadingPanel.js"></script>
	<link rel="stylesheet" type="text/css" href="../lib/openlayers/addins/loadingpanel.css" />
	
	<!-- custom code -->
	<script type="text/javascript" src="../shared/js/config.js"></script>
	<script type="text/javascript" src="../shared/js/Message.js"></script>
	<script type="text/javascript" src="../shared/js/Configuration.js"></script>
	<script type="text/javascript" src="../shared/js/data/StoreHelper.js"></script>
	<script type="text/javascript" src="../shared/js/model/WmsProxy.js"></script>

	<script type="text/javascript" src="js/data/Session.js"></script>
	<script type="text/javascript" src="js/data/SessionState.js"></script>
	<script type="text/javascript" src="js/data/Service.js"></script>

	<script type="text/javascript" src="js/controls/ActiveServicesPanel.js"></script>
	<script type="text/javascript" src="js/controls/ServiceCategoryPanel.js"></script>
	<script type="text/javascript" src="js/controls/SettingsDialog.js"></script>
	<script type="text/javascript" src="js/controls/OpacityDialog.js"></script>
	<script type="text/javascript" src="js/controls/NewServiceDialog.js"></script>
	<script type="text/javascript" src="js/controls/MetaDataDialog.js"></script>

	<script type="text/javascript" src="js/Workspace.js"></script>

	<script type="text/javascript">
	Ext.QuickTips.init();
	Ext.onReady(function() {
		// load the configuration
		de.ingrid.mapclient.Configuration.load({
			success: function() {
				// determine the view configuration 
				var viewConfig = 'default';

				// get the viewConfig parameter if given
				var getParams = document.URL.split("?");
				if (getParams.length > 1) {
					var params = Ext.urlDecode(getParams[getParams.length-1]);
					if (params['viewConfig']) {
						viewConfig = params['viewConfig']
					}
				}
				
				// build the gui after the configuration is loaded
				new de.ingrid.mapclient.frontend.Workspace({
					viewConfig: de.ingrid.mapclient.VIEW_CONFIG[viewConfig]
				});
			},
			failure: function() {
				de.ingrid.mapclient.Message.showError(de.ingrid.mapclient.Message.LOAD_CONFIGURATION_FAILURE);
			}
		});
	});
	</script>

</head>
<body>
   <noscript>
   Javascript has to be enabled to run this application.
   </noscript>
</body>
</html>
